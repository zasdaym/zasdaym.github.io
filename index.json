[{"content":"For some small tasks, sometimes Bash script (shell script in general) is better than a full-blown program using programming languages. Here\u0026rsquo;s some personal tips to write a Bash script:\nExit on fail Use set -o errexit to make the script exit when it fails. If some commands are allowed to fail, command1 || echo \u0026quot;command1 is failed, but continuing\u0026quot; can be used.\nPrevent access to undeclared variables Use set -o nounset to exit when the script tries to use undeclared variables. Imagine running this command when undeclared variables is allowed:\nrm -rf ${base_folder}/* When the variable $base_folder is not set, it will become rm -rf /*. If some variables are allowed to be undeclared, use ${variable_name:default_value} to set $variable_name to default_value when it\u0026rsquo;s not declared.\nIdempotency What is idempotency?\n Idempotence is the property of certain operations in mathematics and computer science whereby they can be applied multiple times without changing the result beyond the initial application.\n In short, it means that idempotent Bash scripts should have the same effects on the system even when called multiple times. Some example of idempotency in Bash script:\nCreating a symbolic link The basic syntax of creating a symbolic link is:\nln -s source target This is not idempotent, it will fail in the second run because the target is already exists. It can be solved by adding the -f flag:\nln -sf source target If executed multiple times, it\u0026rsquo;s still not idempotent because it will create a symbolic link inside the previously created symbolic link (nested). The idempotent way to create a symbolic link is:\nln -sfn source target Removing a file The command rm filename will fail if the file is not exists, use rm -f instead. To remove folder, use rm -rf.\nCheck if a file exists Common usage is to download a file if only its not exist:\nif [[ ! -f ${HOME}/.local/bin/random_binary ]]; then wget -qO ${HOME}/.local/bin/random_binary https://randomsite.com/random_binary fi Use curly brace to access variables When using variables inside a string, sometimes it\u0026rsquo;s clearer to access the variable with the curly brace. So instead of this:\necho \u0026quot;$var1$var2$var3\u0026quot; Prefer this:\necho \u0026quot;${var1}${var2}${var3}\u0026quot; For special variables like $1 or $@, prefer without the curly braces.\n","permalink":"https://zasdaym.github.io/posts/bash-script/","summary":"For some small tasks, sometimes Bash script (shell script in general) is better than a full-blown program using programming languages. Here\u0026rsquo;s some personal tips to write a Bash script:\nExit on fail Use set -o errexit to make the script exit when it fails. If some commands are allowed to fail, command1 || echo \u0026quot;command1 is failed, but continuing\u0026quot; can be used.\nPrevent access to undeclared variables Use set -o nounset to exit when the script tries to use undeclared variables.","title":"Bash script"},{"content":"Γειά σου Κόσμε!\n","permalink":"https://zasdaym.github.io/posts/hello-world/","summary":"Γειά σου Κόσμε!","title":"Γειά σου Κόσμε!"}]